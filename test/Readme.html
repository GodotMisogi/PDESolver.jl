<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Local Testing · PDESolver.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/default.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Ubuntu+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../../versions.js"></script></head><body><nav class="toc"><h1>PDESolver.jl</h1><form class="search" action="../search.html"><select id="version-selector" onChange="window.location.href=this.value"><option value="#" selected="selected" disabled="disabled">Version</option></select><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">PDESolver Introduction</a></li><li><span class="toctext">PDESolver Concepts</span><ul><li><a class="toctext" href="../concepts/intro.html">Intro</a></li><li><a class="toctext" href="../concepts/pumi.html">PUMI</a></li><li><a class="toctext" href="../concepts/sbp.html">SBP</a></li></ul></li><li><span class="toctext">Building PDESolver</span><ul><li><a class="toctext" href="../build.html">Building PDESolver</a></li><li><a class="toctext" href="../deps_readme.html">Build Options</a></li></ul></li><li><span class="toctext">DOC To be broken up or organized</span><ul><li><a class="toctext" href="../interfaces.html">Code Interfaces</a></li><li><a class="toctext" href="../parallel.html">Code Parallelization</a></li></ul></li><li><span class="toctext">Examples</span><ul><li><a class="toctext" href="../examples/isentropic.html">Isentropic Vortex</a></li><li><a class="toctext" href="../examples/unsteady.html">Unsteady Vortex</a></li></ul></li><li><span class="toctext">Frontend</span><ul><li><a class="toctext" href="../pdesolver.html">Introduction</a></li><li><a class="toctext" href="../pdesolver_user.html">PDESolver User Interface</a></li><li><a class="toctext" href="../pdesolver_physics.html">PDESolver Physics Interface</a></li><li><a class="toctext" href="../pdesolver_structure.html">PDESolver Structure</a></li></ul></li><li><span class="toctext">Invocation</span><ul><li><a class="toctext" href="../invocation/calling.html">Calling PDESolver</a></li><li><a class="toctext" href="../invocation/interactive.html">Interactive Session (experimental)</a></li></ul></li><li><span class="toctext">Solver</span><ul><li><a class="toctext" href="../solver/Readme.html">Overview of Physics Modules</a></li><li><a class="toctext" href="../solver/misc.html">Assorted Function and Types</a></li><li><a class="toctext" href="../solver/SolverCommon.html">Solver Common</a></li><li><span class="toctext">Advection</span><ul><li><a class="toctext" href="../solver/advection/advection.html">Introduction</a></li><li><a class="toctext" href="../solver/advection/types.html">Datatypes</a></li><li><a class="toctext" href="../solver/advection/volume.html">Volume Integrals</a></li><li><a class="toctext" href="../solver/advection/flux.html">Face Integrals</a></li><li><a class="toctext" href="../solver/advection/bc.html">Boundary Integrals</a></li><li><a class="toctext" href="../solver/advection/ic.html">Initial Condition</a></li><li><a class="toctext" href="../solver/advection/source.html">Source Term</a></li><li><a class="toctext" href="../solver/advection/common.html">Common Functions</a></li><li><a class="toctext" href="../solver/advection/adjoint.html">Adjoint</a></li><li><a class="toctext" href="../solver/advection/boundary_functional.html">Boundary Functional</a></li></ul></li><li><span class="toctext">Euler</span><ul><li><a class="toctext" href="../solver/euler/euler.html">Introduction</a></li><li><a class="toctext" href="../solver/euler/types.html">Datatypes</a></li><li><a class="toctext" href="../solver/euler/volume.html">Volume Integrals</a></li><li><a class="toctext" href="../solver/euler/volume_diff.html">Volume Integrals Jacobian</a></li><li><a class="toctext" href="../solver/euler/flux.html">Face Integrals</a></li><li><a class="toctext" href="../solver/euler/flux_diff.html">Face Integrals Jacobian</a></li><li><a class="toctext" href="../solver/euler/faceElementIntegrals.html">Face Element Integrals</a></li><li><a class="toctext" href="../solver/euler/bc.html">Boundary Integrals</a></li><li><a class="toctext" href="../solver/euler/bc_diff.html">Boundary Integrals Jacobian</a></li><li><a class="toctext" href="../solver/euler/ic.html">Initial Conditions</a></li><li><a class="toctext" href="../solver/euler/source.html">Source Term</a></li><li><a class="toctext" href="../solver/euler/common.html">Common Functions</a></li><li><a class="toctext" href="../solver/euler/conversion.html">Conversion</a></li><li><a class="toctext" href="../solver/euler/flux_functions.html">Numerical Flux Functions</a></li><li><a class="toctext" href="../solver/euler/flux_functions_diff.html">Numerical Flux Functions Jacobian</a></li><li><a class="toctext" href="../solver/euler/stabilization.html">Stabilization</a></li><li><a class="toctext" href="../solver/euler/adjoint.html">Adjoint</a></li><li><a class="toctext" href="../solver/euler/boundary_functional.html">Boundary Functional</a></li><li><a class="toctext" href="../solver/euler/misc.html">Misc</a></li><li><a class="toctext" href="../solver/euler/homotopy.html">Homotopy</a></li><li><a class="toctext" href="../solver/euler/homotopy_diff.html">Homotopy Jacobian</a></li><li><a class="toctext" href="../solver/euler/eigensystem.html">Eigensystem</a></li><li><a class="toctext" href="../solver/euler/startup.html">Startup</a></li></ul></li><li><span class="toctext">Simple ODE</span><ul><li><a class="toctext" href="../solver/simpleODE/simpleODE.html">Main</a></li></ul></li></ul></li><li><span class="toctext">Input</span><ul><li><a class="toctext" href="../input/input.html">Introduction</a></li><li><a class="toctext" href="../input/keys.html">Important Keys</a></li></ul></li><li><span class="toctext">LinearSolvers</span><ul><li><a class="toctext" href="../linearsolvers/linearsolvers.html">Introduction</a></li><li><a class="toctext" href="../linearsolvers/pc.html">Preconditioners</a></li><li><a class="toctext" href="../linearsolvers/lo.html">Linear Operators</a></li><li><a class="toctext" href="../linearsolvers/ls.html">Linear Solvers</a></li></ul></li><li><span class="toctext">NonlinearSolvers</span><ul><li><a class="toctext" href="../NonlinearSolvers/nonlinearsolvers.html">Introduction</a></li><li><a class="toctext" href="../NonlinearSolvers/steady.html">Steady</a></li><li><span class="toctext">Unsteady</span><ul><li><a class="toctext" href="../NonlinearSolvers/unsteady/intro.html">Intro</a></li><li><a class="toctext" href="../NonlinearSolvers/unsteady/rk4.html">Runge-Kutta</a></li><li><a class="toctext" href="../NonlinearSolvers/unsteady/lserk.html">LSERK</a></li><li><a class="toctext" href="../NonlinearSolvers/unsteady/cn.html">Crank-Nicolson</a></li><li><a class="toctext" href="../NonlinearSolvers/unsteady/cn_uadj.html">Crank-Nicolson: Unsteady Adjoint</a></li></ul></li><li><a class="toctext" href="../NonlinearSolvers/newton.html">Newton&#39;s Method</a></li><li><a class="toctext" href="../NonlinearSolvers/jacobian.html">Jacobian Calculation</a></li><li><a class="toctext" href="../NonlinearSolvers/jac_recalc.html">Jacobian Freezing</a></li><li><a class="toctext" href="../NonlinearSolvers/residual_evaluation.html">Residual Evalution</a></li><li><a class="toctext" href="../NonlinearSolvers/matrix.html">Matrix Interface</a></li><li><a class="toctext" href="../NonlinearSolvers/newton_inner.html">Newton Inner</a></li></ul></li><li><span class="toctext">Utils</span><ul><li><a class="toctext" href="../Utils/Utils.html">Main</a></li><li><a class="toctext" href="../Utils/parallel.html">Parallel Constructs</a></li><li><a class="toctext" href="../Utils/projections.html">Projections</a></li><li><a class="toctext" href="../Utils/logging.html">Logging</a></li><li><a class="toctext" href="../Utils/io.html">Input/Output</a></li><li><a class="toctext" href="../Utils/checkpoint.html">Checkpointing</a></li><li><a class="toctext" href="../Utils/misc.html">Misccellaneous</a></li></ul></li><li><span class="toctext">Testing</span><ul><li><a class="toctext" href="Testing.html">Introduction</a></li><li class="current"><a class="toctext" href="Readme.html">Local Testing</a><ul class="internal"><li><a class="toctext" href="#Adding-Tests-1">Adding Tests</a></li></ul></li><li><a class="toctext" href="Travis.html">CI Testing</a></li><li><a class="toctext" href="TestSystem.html">Test API</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Testing</li><li><a href="Readme.html">Local Testing</a></li></ul><a class="edit-page" href="https://github.com/OptimalDesignLab/PDESolver.jl/tree/cd605579e05af7f90c72771fb7335177465209f5/docs/src/test/Readme.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/></header><h1><a class="nav-anchor" id="Test-System-1" href="#Test-System-1">Test System</a></h1><p>The Ticon test system is composed of functions that test different aspects of the code.  The test system allows tags to be associated with each test function, and selective running of tests based on their tags. Currently, each physics module has its own set of tags and test list. The serial tests for a single physics module  are run as follows:</p><pre><code class="language-julia">  cd test/physics_module
  julia ./runtests.jl  TAG1 TAG2 ...</code></pre><p>The parallel tests are run with:</p><pre><code class="language-julia">  cd test/physics_module
  mpirun -np 2 julia ./runtests_parallel.jl  TAG1 TAG2 ...</code></pre><pre><code class="language-julia">  cd test/physics_module
  mpirun -np 4 julia ./runtests_parallel4.jl  TAG1 TAG2 ...</code></pre><p>for the 2 and 4 processors tests, respectively</p><p>The parallel tests for all physics modules are run with:</p><pre><code class="language-julia">  ./runtests_parallel.sh TAG1 TAG2...</code></pre><p>and all tests (serial + parallel) for all physics modules are run with</p><pre><code class="language-julia">  ./runtests.sh TAG1 TAG2</code></pre><p>Running the tests in a single julia session can be faster because the code does not have to be recompiled for each physics.  The serial tests can be run with:</p><pre><code class="language-none">  julia ./runtests.jl TAG1 TAG2 ...</code></pre><p>the 2 processor tests with</p><pre><code class="language-none">  mpirun -np 2 julia ./runtests_parallel2.jl TAG1 TAG2 ...</code></pre><p>and the 4 processor tests with</p><pre><code class="language-none">  mpirun -np 4 julia ./runtests_parallel4.jl TAG1 TAG2 ...</code></pre><p>All the tests (serial + parallel) can be run with</p><pre><code class="language-none">  ./runtests_fast.sh TAG1 TAG2 ...</code></pre><p>For all scripts except <code>runtests_fast.sh</code>, if no tags are specified, all tests are run. If any tags are specified, only functions matching those tags are run. For <code>runtest_fast.sh</code> only the tests with <code>TAG_SHORTTEST</code> are run by default. If any tags are specified, only tests matching the tags (and not <code>TAG_SHORTTEST</code> are run). The list of currently defined tags can be found in <code>./tags.jl</code> Note that the serial tests must  be run before the parallel tests. All test must have one of <code>LengthTags</code> associated with them. Any test that takes less than 60 seconds to run should be specified as a TAG_SHORTTEST, otherwise TAG_LONGTEST.</p><h2><a class="nav-anchor" id="Adding-Tests-1" href="#Adding-Tests-1">Adding Tests</a></h2><p>Each physics module maintains a <code>TestSet</code> object which contains a list of tests and their associated tags.  See the previous paragraph for a note about the required tags.  TestSet.jl provides an API for adding tests to the list.</p><p>All tests must be enclosed in functions.  These functions must fit into one of three catagories:</p><ol><li>zero argument functions</li><li>functions that take the arguments <code>(mesh, sbp, eqn, opts)</code> as produced by      an input file which already exists</li><li>functions that take the arguments <code>(mesh, sbp, eqn, opts)</code> as produced by      modifying an existing input file</li></ol><p>These catagories correspond to <code>add_funcs1!</code>, <code>add_funcs2!</code>, and <code>add_funcs3!</code> in TestSet.jl.</p><p>The function <code>run_testlist</code> runs a test list.  See the documentation of these functions for details on how to use them.</p><p>Note that it is acceptable for a test function to load input files internally. The benefit to type 2 functions over type 1 functions is in the case when several functions share an input file.  The test system will only load the file once if possible, rather than for every test function that uses is. Consequently, each test function must not depend on modifications made to the the <code>(mesh, sbp, eqn,  opts)</code> objects by other test functions, because the objects may or may not be re-initialized between calls to the test functions.  Also, because tags can be used to selectively run tests, it cannot be guaranteed that a particular test will run before another one.</p><footer><hr/><a class="previous" href="Testing.html"><span class="direction">Previous</span><span class="title">Introduction</span></a><a class="next" href="Travis.html"><span class="direction">Next</span><span class="title">CI Testing</span></a></footer></article></body></html>
