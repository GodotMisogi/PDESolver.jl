<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Calling PDESolver · PDESolver.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/default.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Ubuntu+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../../versions.js"></script></head><body><nav class="toc"><h1>PDESolver.jl</h1><form class="search" action="../search.html"><select id="version-selector" onChange="window.location.href=this.value"><option value="#" selected="selected" disabled="disabled">Version</option></select><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li><a class="toctext" href="../interfaces.html">Code Interfaces</a></li><li><a class="toctext" href="../parallel.html">Code Parallelization</a></li><li><span class="toctext">PDESolver</span><ul><li><a class="toctext" href="../pdesolver.html">Introduction</a></li><li><a class="toctext" href="../pdesolver_user.html">PDESolver User Interface</a></li><li><a class="toctext" href="../pdesolver_physics.html">PDESolver PhysicsInterface</a></li></ul></li><li><span class="toctext">Invocation</span><ul><li class="current"><a class="toctext" href="calling.html">Calling PDESolver</a><ul class="internal"><li><a class="toctext" href="#Simple-Mode-1">Simple Mode</a></li><li><a class="toctext" href="#Advanced-Mode-1">Advanced Mode</a></li></ul></li><li><a class="toctext" href="interactive.html">Interactive Session (experimental)</a></li></ul></li><li><span class="toctext">Solver</span><ul><li><a class="toctext" href="../solver/Readme.html">Overview of Physics Modules</a></li><li><span class="toctext">Advection</span><ul><li><a class="toctext" href="../solver/advection/advection.html">Main</a></li><li><a class="toctext" href="../solver/advection/types.html">Datatypes</a></li><li><a class="toctext" href="../solver/advection/volume.html">Volume Integrals</a></li><li><a class="toctext" href="../solver/advection/flux.html">Face Integrals</a></li><li><a class="toctext" href="../solver/advection/bc.html">Boundary Integrals</a></li><li><a class="toctext" href="../solver/advection/ic.html">Initial Condition</a></li><li><a class="toctext" href="../solver/advection/source.html">Source Term</a></li><li><a class="toctext" href="../solver/advection/common.html">Common Functions</a></li><li><a class="toctext" href="../solver/advection/adjoint.html">Adjoint</a></li><li><a class="toctext" href="../solver/advection/boundary_functional.html">Boundary Functional</a></li></ul></li><li><span class="toctext">Euler</span><ul><li><a class="toctext" href="../solver/euler/euler.html">Main</a></li><li><a class="toctext" href="../solver/euler/types.html">Datatypes</a></li><li><a class="toctext" href="../solver/euler/volume.html">Volume Integrals</a></li><li><a class="toctext" href="../solver/euler/flux.html">Face Integrals</a></li><li><a class="toctext" href="../solver/euler/bc.html">Boundary Integrals</a></li><li><a class="toctext" href="../solver/euler/ic.html">Initial Conditions</a></li><li><a class="toctext" href="../solver/euler/source.html">Source Term</a></li><li><a class="toctext" href="../solver/euler/common.html">Common Functions</a></li><li><a class="toctext" href="../solver/euler/conversion.html">Conversion</a></li><li><a class="toctext" href="../solver/euler/flux_functions.html">Numerical Flux Functions</a></li><li><a class="toctext" href="../solver/euler/stabilization.html">Stabilization</a></li><li><a class="toctext" href="../solver/euler/adjoint.html">Adjoint</a></li><li><a class="toctext" href="../solver/euler/boundary_functional.html">Boundary Functions</a></li><li><a class="toctext" href="../solver/euler/misc.html">Misc</a></li></ul></li><li><span class="toctext">Simple ODE</span><ul><li><a class="toctext" href="../solver/simpleODE/simpleODE.html">Main</a></li></ul></li></ul></li><li><span class="toctext">Input</span><ul><li><a class="toctext" href="../input/input.html">Main</a></li></ul></li><li><span class="toctext">NonlinearSolvers</span><ul><li><a class="toctext" href="../NonlinearSolvers/nonlinearsolvers.html">Main</a></li><li><a class="toctext" href="../NonlinearSolvers/steady.html">Steady</a></li><li><a class="toctext" href="../NonlinearSolvers/unsteady.html">Unsteady</a></li></ul></li><li><span class="toctext">Utils</span><ul><li><a class="toctext" href="../Utils/Utils.html">Main</a></li><li><a class="toctext" href="../Utils/parallel.html">Parallel Constructs</a></li><li><a class="toctext" href="../Utils/projections.html">Projections</a></li><li><a class="toctext" href="../Utils/logging.html">Logging</a></li><li><a class="toctext" href="../Utils/io.html">Input/Output</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Invocation</li><li><a href="calling.html">Calling PDESolver</a></li></ul><a class="edit-page" href="https://github.com/OptimalDesignLab/PDESolver.jl/tree/7f64fe3196fe29066b53481e40dbcafae21b2d34/docs/src/invocation/calling.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/></header><h1><a class="nav-anchor" id="Running-the-Code-1" href="#Running-the-Code-1">Running the Code</a></h1><p>Before running the code, you must <code>source</code> the shell script <code>PumiInterface/src/use_julialib.sh</code>.  This enables Julia to find and use Pumi.</p><p>The code takes an input file that defines all options for the solver, including the which physics to solve, which mesh to use, initial conditions, boundary conditions, and discretization.  The file <code>src/input/input_vals.txt</code> describes the input file format and all valid options.</p><h2><a class="nav-anchor" id="Simple-Mode-1" href="#Simple-Mode-1">Simple Mode</a></h2><p>Once an input file is prepared, the solver can be invoked with</p><pre><code class="language-julia">mpirun -np x julia /path/to/PDESolver/src/startup.jl &quot;input_file_name&quot;</code></pre><p>This will run the solver in parallel with <code>x</code> processes, solving the physics specified in the input file.</p><h2><a class="nav-anchor" id="Advanced-Mode-1" href="#Advanced-Mode-1">Advanced Mode</a></h2><p>The code also provides a scripting interface.  This enables users to supply initial conditions and boundary conditions, as well as do advanced post-processing if desired.</p><p>The template script is:</p><pre><code class="language-julia">using PDESolver  # load the interface to the code
using AdvectionEquationMod  # load the desired physics module

# register ICs and BCs here

input_fname = ARGS[1]  # use the first command line argument as the input file
                       # name

# solve the equation defined in the input file
mesh, sbp, eqn, opts = run_solver(input_fname)

# do post-processing using mesh, sbp, eqn, opts here
</code></pre><p><code>mesh, sbp, eqn, opts</code> are the <code>AbstractMesh</code> object, the SummationByParts operator, the <code>AbstractSolutionData</code>, and the options dictionary, respectively.</p><p>The <code>AbstractMesh</code> object contains all the data about the mesh, including coordinates and mapping jacobian information.  The <code>sbp</code> object is used for numerically approximating derivatives. The <code>AbstractSolutionData</code> object contains all the data about the solution and the residual of the equation.  The input file gets parsed into the options dictionary, which is used to by the rest of the code.</p><p>The PDESolver module exports several functions for use by the scripting interface.  The first two <code>registerIC</code> and <code>registerBC</code> allow users to supply initial conditions and boundary conditions.  See the documentation of the functions for details.  The functions <code>printICNames</code> and <code>printBCNames</code> print the names of all currently registers initial conditions and boundary conditions.</p><p>For example a user can, either in a Julia script or interactive (REPL) session:</p><pre><code class="language-julia">using PDESolver
using AdvectionEquationMod

printBCNames(AdvectionEquationMod)</code></pre><p>And this will print the names of all the boundary conditions currently known to the Advection Equation module.</p><footer><hr/><a class="previous" href="../pdesolver_physics.html"><span class="direction">Previous</span><span class="title">PDESolver PhysicsInterface</span></a><a class="next" href="interactive.html"><span class="direction">Next</span><span class="title">Interactive Session (experimental)</span></a></footer></article></body></html>
